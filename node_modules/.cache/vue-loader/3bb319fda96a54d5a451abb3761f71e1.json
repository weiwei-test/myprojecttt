{"remainingRequest":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\src\\views\\Dmsorder.vue?vue&type=style&index=0&id=405e48be&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\src\\views\\Dmsorder.vue","mtime":1714314763000},{"path":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Downloads\\myprojectt-master\\vueDataV-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IHJvdzsKICBtYXJnaW4tbGVmdDogMyU7Cn0KCi5pbnB1dC1ncm91cCB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLmlucHV0LWZpZWxkIHsKICBwYWRkaW5nOiA4cHg7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLWxlZnQ6IDMwcHg7Cn0KCi5za3V1IHsKICBtYXJnaW4tbGVmdDogMzBweDsKfQoKLnNpemUtbGFiZWwgewogIG1hcmdpbi1sZWZ0OiAzMHB4Owp9Cgouc2VsZWN0LWZpZWxkIHsKICBwYWRkaW5nOiA4cHg7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgd2lkdGg6IDEwMCU7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBtYXJnaW4tdG9wOiA1cHg7CiAgbWFyZ2luLWxlZnQ6IDMwcHg7Cgp9Cgouc2l6ZS1pbnB1dCB7CiAgcGFkZGluZzogOHB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIHdpZHRoOiAxMDAlOwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgbWFyZ2luLXRvcDogNXB4OwogIG1hcmdpbi1sZWZ0OiAzMHB4Owp9CgoubG9nIHsKICBtYXJnaW4tbGVmdDogMzAlOwogIG1hcmdpbi10b3A6IDBweDsKfQoKLm9yZGVyLWJ1dHRvbiB7CiAgcGFkZGluZzogMTBweCAyMHB4OwogIGJvcmRlcjogbm9uZTsKICBib3JkZXItcmFkaXVzOiAxMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7CiAgY29sb3I6IHdoaXRlOwogIGN1cnNvcjogcG9pbnRlcjsKICBtYXJnaW4tbGVmdDogMTU1cHg7Cn0KCi5zaXplLWlucHV0IHsKICB3aWR0aDogY2FsYygxMDAlIC0gNXB4KTsgLyog5bC656CB6L6T5YWl5qGG5a695bqm5qC55o2u5YiX5pWw6Ieq5Yqo6LCD5pW0ICovCiAgbWFyZ2luLXJpZ2h0OiA1cHg7Cn0KCi5tZXNzYWdlLWJveCB7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBib3JkZXItcmFkaXVzOiAxMHB4OwogIHBhZGRpbmc6IDEwcHg7CiAgd2lkdGg6IDYwMHB4OwogIGhlaWdodDogMzAwcHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQo="},{"version":3,"sources":["Dmsorder.vue"],"names":[],"mappings":";AAiNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dmsorder.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n      <div class=\"container\">\n        <div class=\"son-container\">\n          <div class=\"input-group\">\n            <label for=\"sku\" class=\"skuu\">商品id：</label>\n            <input type=\"text\" id=\"sku\" v-model=\"sku\" @keyup.enter=\"fetchSize\" class=\"input-field\">\n          </div>\n          <div class=\"input-group\">\n            <label for=\"stock-type\">商品类型：</label>\n            <select id=\"stock-type\" v-model=\"stockType\" class=\"select-field\">\n              <option value=\"normal\">普通商品</option>\n              <option value=\"jit\">贵重商品</option>\n            </select>\n          </div>\n          <div class=\"input-group\">\n            <label for=\"order-quantity\">订单数量：</label>\n            <input type=\"number\" id=\"order-quantity\" v-model=\"orderQuantity\" class=\"select-field\">\n          </div>\n          <div class=\"input-group\">\n            <label class=\"size-label\">商品条码：</label>\n            <div v-for=\"(size, index) in sizes\" :key=\"index\">\n              <input type=\"text\" v-model=\"quantity[index]\" :placeholder=\"sizes[index]['sku']\" class=\"size-input\">\n            </div>\n          </div>\n          <div>\n            <button @click=\"orderbutton\" class=\"order-button\">一键下单</button>\n          </div>\n        </div>\n        <div class=\"log\">\n          <h3 class=\"logview\" align=\"center\">下单跟进日志</h3>\n          <textarea v-model=\"receivedMessagess\" rows=\"10\" cols=\"50\" readonly class=\"message-box\"></textarea>\n          <h3 class=\"logview\" align=\"center\">返回参数</h3>\n          <textarea v-model=\"receivedMessages\" rows=\"10\" cols=\"50\" readonly class=\"message-box\"></textarea>\n        </div>\n      </div>\n    </div>\n  \n  </template>\n  \n  <script>\n  export default {\n    data() {\n      return {\n        sku: '',\n        stockType: 'normal',\n        orderQuantity: '',\n        quantity: [],\n        sizes: [], // 存储尺码的数组\n        receivedMessages: '',\n        receivedMessagess: []\n      };\n    },\n  \n    mounted() {\n      this.connectWebSocket()\n    },\n  \n    methods: {\n  \n      connectWebSocket() {\n        // Replace 'ws://localhost:8000/ws/' with your WebSocket server URL\n        this.socket = new WebSocket('ws://localhost:8000/order/chat/');\n  \n        this.socket.onmessage = event => {\n          this.receivedMessagess += event.data + '\\n';\n        };\n        this.socket.onclose = () => {\n          console.log('WebSocket closed. Reconnecting...');\n          this.connectWebSocket();\n        };\n      },\n  \n      async orderbutton() {\n        this.receivedMessages = '';\n        this.receivedMessagess='';\n        const datatosend = this.sizes.map((size, index) => ({\n          size: size,\n          quantity: this.quantity[index]\n        }));\n  \n        // 调用后端API获取尺码信息\n        const times = parseInt(this.orderQuantity);\n        for (let i = 0; i < times; i++) {\n          try {\n            let stockTypeEnumValue = '';\n            let combinedData = [];\n            if (this.stockType === 'normal') {\n              stockTypeEnumValue = 'NORMAL';\n            } else if (this.stockType === 'jit') {\n              stockTypeEnumValue = 'JIT';\n            }\n            const response = await this.$API.order.order({\n              'orderQuantity': this.orderQuantity,\n              'stockType': stockTypeEnumValue,\n              'skc': this.sku,\n              'skulist': datatosend\n            });\n            console.log(response.info)\n            if (response.code === 20000) {\n              this.receivedMessages += ('第' + (i + 1) + '个订单为：' + JSON.stringify(response.info)) + '\\n\\n'\n              combinedData=response.info[0]['dmsid'];\n              this.socket.send(combinedData)\n            } else {\n              console.error('Error:', 'sdsf');\n            }\n          } catch (error) {\n            console.error('Error', error);\n          }\n        }\n  \n  \n      },\n  \n      async fetchSize() {\n        if (this.sku.trim() === '') return; // 如果SKU输入为空，则不调用后端API\n        try {\n          const response = await this.$API.order.size({'skc': this.sku});\n          if (response.code === 20000) {\n            this.sizes = response.info;\n          } else {\n            console.error('Error', 'shujucuowu');\n          }\n        } catch (error) {\n          console.error('Error', error);\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .container {\n    display: flex;\n    flex-direction: row;\n    margin-left: 3%;\n  }\n  \n  .input-group {\n    margin-bottom: 20px;\n  }\n  \n  .input-field {\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    width: 100%;\n    margin-left: 30px;\n  }\n  \n  .skuu {\n    margin-left: 30px;\n  }\n  \n  .size-label {\n    margin-left: 30px;\n  }\n  \n  .select-field {\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    width: 100%;\n    box-sizing: border-box;\n    margin-top: 5px;\n    margin-left: 30px;\n  \n  }\n  \n  .size-input {\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    width: 100%;\n    box-sizing: border-box;\n    margin-top: 5px;\n    margin-left: 30px;\n  }\n  \n  .log {\n    margin-left: 30%;\n    margin-top: 0px;\n  }\n  \n  .order-button {\n    padding: 10px 20px;\n    border: none;\n    border-radius: 10px;\n    background-color: #007bff;\n    color: white;\n    cursor: pointer;\n    margin-left: 155px;\n  }\n  \n  .size-input {\n    width: calc(100% - 5px); /* 尺码输入框宽度根据列数自动调整 */\n    margin-right: 5px;\n  }\n  \n  .message-box {\n    border: 1px solid #ccc;\n    border-radius: 10px;\n    padding: 10px;\n    width: 600px;\n    height: 300px;\n    margin-bottom: 10px;\n  }\n  </style>\n  "]}]}